---
title: "A brief Introducction to STATA functions into R"
autor: Alvaro Gutierrez
---



# Introduction
In the present session we will learn how to develop beautiful and completely personalized descriptive statistics. This could be made, either using already made libraries or ''handmade'' process. The second way (the way that the authors strongly recommend) lies in the use of primitive functional programming to imitate and, at the end, definetly outperform the STATA preloaded commands like ''summarize'' or ''tabulate''. It could sounds ambitious (in fact, it is), but the aim of the present chapter is twofold. For the beginners or ''fast-user'', they will get a friendly way to create standard tables as STATA does. While, in the other hand, for more curious or ''deep-users'' they will be able to create, same tables, but with the surpluss that they will also get the understanding of the primitive functions that help in the process.

## Loading Libraries and Dataset

First we will start loading the libraries that we will use hereafter.
```{r results='hide', message=FALSE, warning=FALSE}
library(tidyverse)
library(readstata13)
library(gmodels)
```

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```




```{r results='hide', message=FALSE, warning=FALSE}
base <-  read.dta13("eps2009_trabajable.dta")
```
With this we can visualize the first three observations of the data set, due to unfortunately R is not as powerfull as STATA to show the data sets.
``` 
header <- base[3,]
View(header)
``` 


# Descriptive Statistics
## First Stop: _summarize_ v/s _summary_

The first, way to generate a brief summary of a variable is with the command ''summary'' which, indeed, is closely related to the homonym in the STATA preloaded command.

```{r,eval=TRUE} 
income_summary<-summary(base$ing09)
income_summary
```

Another similar function that you may use to get simple statistics is _fivenum_. It will give you minimum, lower-hinge, median, upper-hinge and maximum of the imput data.
```{r,eval=TRUE} 
income_fivenum<-fivenum(base$ing09)
income_fivenum
```



## Second Stop: Tabulate


Before to continue, we need to add the labels to the variables. Something that in STATA will looks like:

``` 
label define gender 0 "Female" 1 "Male"
label variable gender gender
```
Into R we will use the function _factor_ to label our data.

```{r,eval=TRUE} 

gender <- factor(base$sexo09,
                    levels = c(0,1),
                    labels = c("Female", "Male"))
```


Just to made more clear the last point. Another example.
``` 
label define quintil_income 1 "1st quintile" 2 "2nd quintile" 3 "3th quintile" 4 "4th quintile"  5 "5th quintile"
label variable quintil_income quintil_income
```

```{r,eval=TRUE} 

quintil_income <- factor(base$quintil_muestra,
                 levels = c(1,2,3,4,5),
                 labels = c("1st quintile", "2nd quintile", "3th quintile" , "4th quintile" ,"5th quintile"))
```


With the data already labeled we will proceed to replicate Tabulate.
